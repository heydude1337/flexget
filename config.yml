variables: variables.yml

templates:
  torrent_tvshows:
    transmission:
      host: "{? trans.adress ?}"
      port: 9091
      username: '{? trans.username ?}'
      password: '{? trans.password ?}'
      path: '{? folder.shows ?}/{{series_name}}/Season {{series_season}}'
    clean_transmission:
      host: "{? trans.adress ?}"
      port: 9091
      username: "{? trans.username ?}"
      password: "{? trans.password ?}"
      finished_for: 2 days
      delete_files: no
  torrent_movies:
    transmission:
      host: "{? trans.adress ?}"
      port: 9091
      username: "{? trans.username ?}"
      password: "{? trans.password ?}"
      path: "{? folder.movies ?}"
      
tasks:
  show-rss:
    priority: 1
    rss: "{? urls.rssfeed ?}"
    accept_all: yes
    exists_series: "{?  folder.tvshows  ?}"
    template: torrent_tvshows
    
  # movies from imdb
  imdb-lookup:
    priority: 10
    list_clear:
      what: 
        - movie_list: imdb_movies
    imdb_watchlist:
      user_id: "{? imdb.username ?}"
      list: "{? imdb.userlist ?}"
    accept_all: yes
    exists:  "{?  folder.movies  ?}"
    list_add:
      - movie_list: imdb_movies
      
  # download movies
  movies-rss:
    priority: 11
    discover:
      what:
        - movie_list: imdb_movies
      from:
        - rarbg:
            category: [44] # 44 = 720p, 45 = 1080p
            sorted_by: seeders
      interval: 4 hours
    content_size:
      min: 3000
      max: 12000
    quality: 1080p+ !cam !2160p
    list_match:
      from:
        - movie_list: imdb_movies
    template: torrent_movies
    
schedules:
  # Run every task once an hour
  - tasks:
      - show-rss
      - movies-rss
    schedule:
      minute: 30
  - tasks:
      - imdb-lookup
    interval: 
      hours: 2


